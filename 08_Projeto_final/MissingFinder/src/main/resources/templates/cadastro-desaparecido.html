<!DOCTYPE html>
<html lang="pt-br" xmlns:th="https://thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrar Desaparecimento</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link th:href="@{/css/style2.css}" rel="stylesheet">
</head>
<body>
                              
<header th:replace="fragments/navbar :: navbar"></header>

<section class="features-section">
    <div class="container">
        <h2 class="section-title">Registrar Pessoa Desaparecida</h2>
        <p class="section-subtitle">Forneça as informações principais para iniciar a busca.</p>

        <form th:action="@{/public/salvar}" method="post" enctype="multipart/form-data" class="row g-4">

            <!-- Dados Pessoais -->
            <div class="col-12">
                <h5 class="mb-3 text-primary">Informações Básicas</h5>
            </div>

            <div class="col-md-6">
                <label for="nome" class="form-label">Nome completo *</label>
                <input type="text" class="form-control" id="nome" name="nome" required>
            </div>

            <div class="col-md-3">
                <label for="data_nascimento" class="form-label">Data de Nascimento *</label>
                <input type="date" class="form-control" id="data_nascimento" name="data_nascimento" required>
            </div>

            <div class="col-md-3">
                <label for="sexo" class="form-label">Sexo *</label>
                <select class="form-control" id="sexo" name="sexo" required>
                    <option value="">Selecione</option>
                    <option value="Masculino">Masculino</option>
                    <option value="Feminino">Feminino</option>
                    <option value="Outro">Outro</option>
                </select>
            </div>

            <!-- Foto do Desaparecido -->
            <div class="col-12 pt-3">
                <h5 class="mb-3 text-primary">Foto do Desaparecido</h5>
            </div>

            <div class="col-md-8">
                <label for="foto" class="form-label">Selecione uma foto *</label>
                <input type="file" class="form-control" id="foto" name="foto" accept="image/*" required>
                <small class="text-muted">Formatos aceitos: JPG, PNG, JPEG (máx. 5MB)</small>
            </div>

            <!-- <div class="col-md-4 text-center">
                <label class="form-label d-block">Prévia da Foto</label>
                <div class="preview-container" style="border: 2px dashed #ddd; border-radius: 8px; padding: 10px; background-color: #f8f9fa;">
                    <img id="preview" src="/img/default-photo.png" alt="Prévia da Foto" 
                         class="img-thumbnail" style="width: 100%; max-width: 200px; height: 200px; object-fit: cover;">
                </div>
            </div> -->

            <!-- Aparência Física -->
            <div class="col-12 pt-3">
                <h5 class="mb-3 text-primary">Características Físicas</h5>
            </div>

            <div class="col-md-4">
                <label for="corPele" class="form-label">Cor da Pele</label>
                <input type="text" class="form-control" id="corPele" name="corPele">
            </div>

            <div class="col-md-4">
                <label for="alturaCm" class="form-label">Altura (cm)</label>
                <input type="number" step="0.1" class="form-control" id="alturaCm" name="alturaCm" placeholder="Ex: 175.5">
            </div>

            <div class="col-md-4">
                <label for="pesoKg" class="form-label">Peso (kg)</label>
                <input type="number" step="0.1" class="form-control" id="pesoKg" name="pesoKg" placeholder="Ex: 70.5">
            </div>

            <!-- Informações do Desaparecimento -->
            <div class="col-12 pt-3">
                <h5 class="mb-3 text-primary">Dados do Desaparecimento</h5>
            </div>

            <div class="col-md-6">
                <label for="dataDesaparecimento" class="form-label">Data do Desaparecimento *</label>
                <input type="date" class="form-control" id="dataDesaparecimento" name="dataDesaparecimento" required>
            </div>

            <div class="col-md-6">
                <label for="localDesaparecimento" class="form-label">Local do Desaparecimento *</label>
                <input type="text" class="form-control" id="localDesaparecimento" name="localDesaparecimento" required>
            </div>

            <!-- Características Específicas -->
            <div class="col-12">
                <label for="caracteristicas" class="form-label">Observações / Características adicionais</label>
                <textarea class="form-control" id="caracteristicas" name="caracteristicas" rows="3"></textarea>
            </div>

            <!-- Botão -->
            <div class="col-12 text-center mt-4">
                <button type="submit" class="btn btn-cta btn-primary-cta">
                    <i class="fas fa-save me-2"></i>Registrar Desaparecimento
                </button>
            </div>
        </form>
    </div>
</section>

<script>
    // Preview da imagem ao selecionar arquivo
    document.getElementById("foto").addEventListener("change", function(event) {
        const file = event.target.files[0];
        const preview = document.getElementById("preview");
        
        if (file) {
            // Validar tamanho do arquivo (máx 5MB)
            if (file.size > 5 * 1024 * 1024) {
                alert("A imagem é muito grande! Por favor, selecione uma imagem menor que 5MB.");
                this.value = "";
                preview.src = "/img/default-photo.png";
                return;
            }
            
            // Validar tipo de arquivo
            if (!file.type.startsWith("image/")) {
                alert("Por favor, selecione apenas arquivos de imagem.");
                this.value = "";
                preview.src = "/img/default-photo.png";
                return;
            }
            
            // Mostrar preview
            const reader = new FileReader();
            reader.onload = function(e) {
                preview.src = e.target.result;
            };
            reader.readAsDataURL(file);
        } else {
            preview.src = "/img/default-photo.png";
        }
    });
</script>

</body>
</html>